<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²°ê³¼ í™•ì¸ ì „ ê´‘ê³  ë³´ê¸° - ì—ê²í…Œí† </title>
    <meta name="description" content="ì ì‹œë§Œìš”! ê²°ê³¼ë¥¼ í™•ì¸í•˜ê¸° ì „ì— ìŠ¤í°ì„œ ê´‘ê³ ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
    
    <!-- Google AdSense ìŠ¤í¬ë¦½íŠ¸ -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_PUBLISHER_ID"
            crossorigin="anonymous"></script>
</head>
<body class="ads-page">
    <header>
        <nav>
            <div class="nav-container">
                <h1 class="logo"><a href="index.html">ì—ê²í…Œí† </a></h1>
                <div class="ads-progress">
                    <span>ê²°ê³¼ í™•ì¸ ì¤‘...</span>
                </div>
            </div>
        </nav>
    </header>

    <main class="ads-container">
        <div class="ads-content">
            <div class="ads-header">
                <h2>ğŸ‰ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!</h2>
                <p>ê²°ê³¼ë¥¼ í™•ì¸í•˜ê¸° ì „ì— ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</p>
            </div>

            <div class="ads-section">
                <div class="ads-title">
                    <h3>ğŸ“¢ ìŠ¤í°ì„œ ê´‘ê³ </h3>
                    <p>ê´‘ê³ ë¥¼ í™•ì¸í•˜ê³  ê²°ê³¼ë¥¼ ë°›ì•„ë³´ì„¸ìš”!</p>
                </div>

                <!-- Google AdSense ê´‘ê³  ì˜ì—­ 1 -->
                <div class="ad-container">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
                         data-ad-slot="YOUR_AD_SLOT_ID"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- ëŒ€ì²´ ê´‘ê³  (AdSenseê°€ ë¡œë“œë˜ì§€ ì•Šì„ ë•Œ) -->
                <div class="fallback-ad" id="fallbackAd">
                    <div class="ad-placeholder">
                        <h4>ğŸŒŸ ì¶”ì²œ ì„œë¹„ìŠ¤</h4>
                        <p>ë” ë§ì€ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ì™€ ì¬ë¯¸ìˆëŠ” ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”!</p>
                        <button class="ad-button" onclick="openExternalAd()">
                            ë” ë§ì€ í…ŒìŠ¤íŠ¸ ë³´ê¸°
                        </button>
                    </div>
                </div>

                <!-- ì¶”ê°€ ê´‘ê³  ì˜ì—­ -->
                <div class="ad-container secondary-ad">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
                         data-ad-slot="YOUR_SECONDARY_AD_SLOT_ID"
                         data-ad-format="rectangle"
                         data-full-width-responsive="true"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
            </div>

            <div class="countdown-section">
                <div class="countdown-circle">
                    <div class="countdown-number" id="countdownNumber">5</div>
                </div>
                <p class="countdown-text">
                    <span id="countdownText">5ì´ˆ</span> í›„ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                </p>
                <div class="countdown-progress">
                    <div class="countdown-bar" id="countdownBar"></div>
                </div>
            </div>

            <div class="ads-buttons">
                <button class="result-btn" id="resultBtn" onclick="goToResults()" disabled>
                    ğŸ¯ ê²°ê³¼ í™•ì¸í•˜ê¸°
                </button>
                <button class="skip-btn" onclick="skipAds()" style="display: none;">
                    ê´‘ê³  ê±´ë„ˆë›°ê¸°
                </button>
            </div>

            <div class="ads-info">
                <p>ğŸ’¡ ê´‘ê³  ìˆ˜ìµì€ ë” ì¢‹ì€ ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤</p>
                <p>ğŸ™ ê´‘ê³  ì‹œì²­í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 ì—ê²í…Œí† . ê´‘ê³  í›„ì›ìœ¼ë¡œ ë¬´ë£Œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
        </div>
    </footer>

    <script>
        let countdownTime = 5;
        let countdownInterval;
        let hasViewedAd = false;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
        window.onload = function() {
            // í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ìˆëŠ”ì§€ í™•ì¸
            const testResult = localStorage.getItem('testResult');
            if (!testResult) {
                // í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ í€´ì¦ˆ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                window.location.href = 'quiz.html';
                return;
            }

            // ê´‘ê³  ë¡œë“œ ìƒíƒœ í™•ì¸
            checkAdLoad();
            
            // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
            startCountdown();
            
            // í˜ì´ì§€ ì²´ë¥˜ ì‹œê°„ ì¶”ì 
            trackPageView();
        };

        function startCountdown() {
            countdownInterval = setInterval(() => {
                countdownTime--;
                
                document.getElementById('countdownNumber').textContent = countdownTime;
                document.getElementById('countdownText').textContent = countdownTime + 'ì´ˆ';
                
                // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì—…ë°ì´íŠ¸
                const progressPercent = ((5 - countdownTime) / 5) * 100;
                document.getElementById('countdownBar').style.width = progressPercent + '%';
                
                if (countdownTime <= 0) {
                    clearInterval(countdownInterval);
                    enableResultButton();
                }
            }, 1000);
        }

        function enableResultButton() {
            document.getElementById('resultBtn').disabled = false;
            document.getElementById('resultBtn').textContent = 'ğŸ¯ ê²°ê³¼ í™•ì¸í•˜ê¸°';
            document.getElementById('resultBtn').classList.add('active');
            
            // ì¹´ìš´íŠ¸ë‹¤ìš´ í…ìŠ¤íŠ¸ ë³€ê²½
            document.getElementById('countdownText').textContent = 'ê²°ê³¼ í™•ì¸ ê°€ëŠ¥';
            document.querySelector('.countdown-text').innerHTML = 'ì´ì œ <strong>ê²°ê³¼ë¥¼ í™•ì¸</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!';
            
            hasViewedAd = true;
        }

        function goToResults() {
            if (!hasViewedAd) {
                alert('ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”. ê´‘ê³ ë¥¼ í™•ì¸í•œ í›„ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ê´‘ê³  ì‹œì²­ ì™„ë£Œ í‘œì‹œ
            localStorage.setItem('adViewed', 'true');
            
            // ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = 'result.html';
        }

        function skipAds() {
            // ê°œë°œ ëª¨ë“œì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
            if (confirm('ê´‘ê³ ë¥¼ ê±´ë„ˆë›°ì‹œê² ìŠµë‹ˆê¹Œ? ê´‘ê³  ìˆ˜ìµì€ ì„œë¹„ìŠ¤ ìš´ì˜ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.')) {
                clearInterval(countdownInterval);
                enableResultButton();
            }
        }

        function openExternalAd() {
            // ì™¸ë¶€ ê´‘ê³  ë§í¬ (ì‹¤ì œ ê´‘ê³ ì£¼ ë§í¬ë¡œ êµì²´)
            window.open('https://example.com/more-tests', '_blank');
        }

        function checkAdLoad() {
            // AdSense ê´‘ê³ ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
            setTimeout(() => {
                const adElements = document.querySelectorAll('.adsbygoogle');
                let adLoaded = false;
                
                adElements.forEach(ad => {
                    if (ad.innerHTML.trim() !== '') {
                        adLoaded = true;
                    }
                });
                
                if (!adLoaded) {
                    // ê´‘ê³ ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ì„ ë•Œ ëŒ€ì²´ ê´‘ê³  í‘œì‹œ
                    document.getElementById('fallbackAd').style.display = 'block';
                }
            }, 2000);
        }

        function trackPageView() {
            // í˜ì´ì§€ ì²´ë¥˜ ì‹œê°„ ì¶”ì 
            const startTime = Date.now();
            
            window.addEventListener('beforeunload', () => {
                const endTime = Date.now();
                const duration = endTime - startTime;
                
                // ì²´ë¥˜ ì‹œê°„ì„ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ (ì¶”í›„ ë¶„ì„ ìš©ë„)
                localStorage.setItem('adPageDuration', duration);
            });
        }

        // í˜ì´ì§€ ì´íƒˆ ë°©ì§€
        window.addEventListener('beforeunload', function(e) {
            if (!hasViewedAd) {
                e.preventDefault();
                e.returnValue = '';
                return 'ê´‘ê³ ë¥¼ í™•ì¸í•œ í›„ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            }
        });

        // ê´‘ê³  í´ë¦­ ì¶”ì 
        document.addEventListener('click', function(e) {
            if (e.target.closest('.adsbygoogle') || e.target.closest('.ad-placeholder')) {
                // ê´‘ê³  í´ë¦­ ì´ë²¤íŠ¸ ì¶”ì 
                console.log('Ad clicked');
                
                // Google Analytics ë“±ì— ì´ë²¤íŠ¸ ì „ì†¡
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'ad_click', {
                        'ad_type': 'adsense',
                        'page_location': window.location.href
                    });
                }
            }
        });
    </script>
</body>
</html>