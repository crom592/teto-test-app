<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>테토테스트 - 재미있는 심리테스트 모음</title>
    <meta name="description" content="에겐남 테토녀 테스트부터 다양한 심리테스트까지! 나를 알아가는 재미있는 시간">
    <meta name="keywords" content="심리테스트, 성격테스트, 에겐남, 테토녀, 연애테스트, 재미테스트">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teto-test-app.pages.dev/">
    <meta property="og:title" content="테토테스트 - 재미있는 심리테스트 모음">
    <meta property="og:description" content="에겐남 테토녀 테스트부터 다양한 심리테스트까지!">
    <meta property="og:image" content="https://teto-test-app.pages.dev/assets/og-image.jpg">
    
    <link rel="stylesheet" href="css/styles-new.css">
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5534320609992391"
            crossorigin="anonymous"></script>
</head>
<body>
    <header class="site-header">
        <div class="header-container">
            <div class="logo-area">
                <h1 class="site-logo">
                    <span class="logo-emoji">🧠</span>
                    <span class="logo-text">테토테스트</span>
                </h1>
            </div>
            <nav class="main-nav">
                <button class="nav-item active" data-category="all">
                    <span class="nav-emoji">✨</span>
                    <span class="nav-text">전체</span>
                </button>
                <button class="nav-item" data-category="personality">
                    <span class="nav-emoji">🎭</span>
                    <span class="nav-text">성격</span>
                </button>
                <button class="nav-item" data-category="love">
                    <span class="nav-emoji">💘</span>
                    <span class="nav-text">연애</span>
                </button>
                <button class="nav-item" data-category="fun">
                    <span class="nav-emoji">🎪</span>
                    <span class="nav-text">재미</span>
                </button>
                <button class="nav-item" data-category="psychology">
                    <span class="nav-emoji">🧩</span>
                    <span class="nav-text">심리</span>
                </button>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <!-- 히어로 배너 -->
        <section class="hero-banner">
            <div class="banner-content">
                <div class="banner-text">
                    <h2 class="banner-title">
                        <span class="text-gradient">나를 알아가는</span><br>
                        재미있는 심리테스트
                    </h2>
                    <p class="banner-subtitle">
                        매주 새로운 테스트가 추가됩니다!
                    </p>
                </div>
                <div class="banner-illustration">
                    <div class="floating-emoji" style="--delay: 0s">🧠</div>
                    <div class="floating-emoji" style="--delay: 0.5s">💭</div>
                    <div class="floating-emoji" style="--delay: 1s">✨</div>
                    <div class="floating-emoji" style="--delay: 1.5s">🎯</div>
                </div>
            </div>
        </section>

        <!-- 인기 테스트 슬라이더 -->
        <section class="popular-tests">
            <div class="section-header">
                <h3 class="section-title">🔥 지금 핫한 테스트</h3>
                <a href="#" class="see-all">전체보기 →</a>
            </div>
            <div class="test-slider">
                <div class="slider-container" id="popularSlider">
                    <!-- 인기 테스트 카드들이 여기에 동적으로 추가됩니다 -->
                </div>
            </div>
        </section>

        <!-- 테스트 그리드 -->
        <section class="all-tests">
            <div class="section-header">
                <h3 class="section-title">전체 테스트</h3>
                <div class="sort-options">
                    <button class="sort-btn active" data-sort="latest">최신순</button>
                    <button class="sort-btn" data-sort="popular">인기순</button>
                </div>
            </div>
            <div class="test-grid" id="testGrid">
                <!-- 테스트 카드들이 여기에 동적으로 추가됩니다 -->
            </div>
        </section>

        <!-- 광고 영역 -->
        <section class="ad-section">
            <div class="ad-container">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5534320609992391"
                        crossorigin="anonymous"></script>
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-5534320609992391"
                     data-ad-slot="1234567890"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-info">
                <p>© 2024 테토테스트. All rights reserved.</p>
                <div class="footer-links">
                    <a href="privacy.html">개인정보처리방침</a>
                    <a href="contact.html">문의하기</a>
                    <a href="about.html">소개</a>
                </div>
            </div>
            <p class="footer-note">본 테스트는 재미를 위한 것이며 전문적인 진단이 아닙니다.</p>
        </div>
    </footer>

    <script>
        // 테스트 데이터 로드 및 렌더링
        let allTests = [];
        let currentCategory = 'all';
        let currentSort = 'latest';

        // 테스트 카드 HTML 생성
        function createTestCard(test) {
            const badges = [];
            if (test.isNew) badges.push('<span class="badge new">NEW</span>');
            if (test.isHot) badges.push('<span class="badge hot">HOT</span>');

            return `
                <article class="test-card" onclick="location.href='${test.url}'">
                    <div class="test-thumbnail">
                        <span class="test-emoji">${test.thumbnail}</span>
                        ${badges.length > 0 ? `<div class="test-badges">${badges.join('')}</div>` : ''}
                    </div>
                    <div class="test-info">
                        <div class="test-category">
                            <span class="category-emoji">${test.categoryEmoji}</span>
                            <span class="category-name">${test.categoryName}</span>
                        </div>
                        <h4 class="test-title">${test.title}</h4>
                        <p class="test-subtitle">${test.subtitle}</p>
                        <div class="test-meta">
                            <span class="meta-item">
                                <span class="meta-icon">👥</span>
                                <span class="meta-text">${test.participants.toLocaleString()}명</span>
                            </span>
                            <span class="meta-item">
                                <span class="meta-icon">⏱️</span>
                                <span class="meta-text">${test.duration}</span>
                            </span>
                        </div>
                    </div>
                </article>
            `;
        }

        // 인기 테스트 슬라이더 카드 생성
        function createSliderCard(test) {
            return `
                <div class="slider-card" onclick="location.href='${test.url}'">
                    <div class="slider-rank">${test.rank}</div>
                    <div class="slider-thumbnail">${test.thumbnail}</div>
                    <div class="slider-info">
                        <h4 class="slider-title">${test.title}</h4>
                        <p class="slider-participants">${test.participants.toLocaleString()}명 참여</p>
                    </div>
                </div>
            `;
        }

        // 테스트 데이터 로드
        async function loadTests() {
            try {
                const response = await fetch('data/tests.json');
                const data = await response.json();
                allTests = data.tests;
                renderTests();
                renderPopularSlider();
            } catch (error) {
                console.error('Failed to load tests:', error);
                // 폴백 데이터 사용
                allTests = [
                    {
                        id: "egen-teto",
                        title: "에겐남·테토녀 테스트",
                        subtitle: "나는 감성적인 에겐? 주도적인 테토?",
                        thumbnail: "🧠",
                        category: "personality",
                        categoryName: "성격유형",
                        categoryEmoji: "🎭",
                        participants: 157892,
                        duration: "3분",
                        isNew: true,
                        isHot: true,
                        url: "quiz.html"
                    }
                ];
                renderTests();
                renderPopularSlider();
            }
        }

        // 테스트 렌더링
        function renderTests() {
            const testGrid = document.getElementById('testGrid');
            let filteredTests = allTests;

            // 카테고리 필터링
            if (currentCategory !== 'all') {
                filteredTests = allTests.filter(test => test.category === currentCategory);
            }

            // 정렬
            if (currentSort === 'popular') {
                filteredTests.sort((a, b) => b.participants - a.participants);
            } else {
                filteredTests.sort((a, b) => b.isNew - a.isNew);
            }

            // 렌더링
            testGrid.innerHTML = filteredTests.map(test => createTestCard(test)).join('');
        }

        // 인기 슬라이더 렌더링
        function renderPopularSlider() {
            const slider = document.getElementById('popularSlider');
            const popularTests = [...allTests]
                .sort((a, b) => b.participants - a.participants)
                .slice(0, 5)
                .map((test, index) => ({ ...test, rank: index + 1 }));

            slider.innerHTML = popularTests.map(test => createSliderCard(test)).join('');
        }

        // 카테고리 필터
        document.querySelectorAll('.nav-item').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                renderTests();
            });
        });

        // 정렬 옵션
        document.querySelectorAll('.sort-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentSort = btn.dataset.sort;
                renderTests();
            });
        });

        // 페이지 로드 시 테스트 로드
        window.addEventListener('load', loadTests);
    </script>
</body>
</html>